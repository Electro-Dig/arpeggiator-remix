# 🎥 摄像头访问问题解决指南

## ❗ 常见问题

如果你在本地打开 `index.html` 或部署到云端时遇到摄像头无法访问的问题，这是由于现代浏览器的安全策略导致的。

## 🔒 为什么会出现这个问题？

现代浏览器（Chrome、Firefox、Safari等）出于安全考虑，要求摄像头访问必须在以下环境中进行：
- ✅ HTTPS 协议的网站
- ✅ `localhost` 域名（本地开发）
- ❌ 直接打开 `file://` 协议的HTML文件
- ❌ HTTP 协议的远程网站

## 💡 解决方案

### 1. 本地开发解决方案

#### 方案A: 使用Python启动本地服务器（推荐）

**Windows用户:**
```bash
# 双击运行 start-server.bat 文件
# 或在命令行中执行：
python -m http.server 8000
```

**Linux/Mac用户:**
```bash
# 给脚本执行权限
chmod +x start-server.sh
# 运行脚本
./start-server.sh
# 或直接执行：
python3 -m http.server 8000
```

然后访问: `http://localhost:8000`

#### 方案B: 使用Node.js服务器
```bash
# 如果你有Node.js
npx serve .
# 或者
npx http-server
```

#### 方案C: 使用Live Server（VS Code用户）
1. 安装 Live Server 扩展
2. 右键点击 `index.html`
3. 选择 "Open with Live Server"

### 2. 云端部署解决方案

将项目部署到支持HTTPS的平台：

#### GitHub Pages
1. 将代码推送到GitHub仓库
2. 在仓库设置中启用GitHub Pages
3. 访问 `https://yourusername.github.io/repository-name`

#### Netlify
1. 将项目文件夹拖拽到 [Netlify](https://netlify.com)
2. 自动获得HTTPS域名

#### Vercel
1. 连接GitHub仓库到 [Vercel](https://vercel.com)
2. 自动部署并获得HTTPS域名

## 🛠️ 故障排除

### 问题1: "本地文件访问不支持摄像头"
**解决方案:** 使用本地服务器，不要直接双击HTML文件

### 问题2: "非HTTPS环境不支持摄像头访问"
**解决方案:** 
- 本地开发: 使用 `localhost` 域名
- 生产环境: 部署到HTTPS网站

### 问题3: "摄像头权限已被拒绝"
**解决方案:**
1. 点击地址栏左侧的摄像头图标
2. 选择"允许"摄像头访问
3. 刷新页面

### 问题4: "未找到可用的摄像头设备"
**解决方案:**
1. 检查摄像头是否连接
2. 关闭其他使用摄像头的应用（QQ、微信、Zoom等）
3. 重新插拔摄像头设备

### 问题5: "摄像头被其他应用占用"
**解决方案:**
1. 关闭所有可能使用摄像头的程序
2. 重启浏览器
3. 重新访问网页

## 🔧 环境检查清单

在访问网页前，请确认：

- [ ] ✅ 使用支持的浏览器（Chrome、Firefox、Safari）
- [ ] ✅ 摄像头设备正常工作
- [ ] ✅ 使用 `localhost` 或 HTTPS 环境
- [ ] ✅ 已允许摄像头权限
- [ ] ✅ 没有其他程序占用摄像头

## 📱 浏览器兼容性

| 浏览器 | 支持状态 | 备注 |
|--------|----------|------|
| Chrome | ✅ 推荐 | 最佳支持 |
| Firefox | ✅ 良好 | 良好支持 |
| Safari | ✅ 良好 | 需要较新版本 |
| Edge | ✅ 良好 | 基于Chromium |
| IE | ❌ 不支持 | 请使用现代浏览器 |

## 🆘 还是解决不了？

如果以上方案都无法解决问题：

1. **检查控制台错误信息**: 按F12打开开发者工具，查看Console标签页中的错误信息
2. **尝试不同浏览器**: 使用Chrome或Firefox浏览器
3. **检查系统权限**: 确保系统层面允许浏览器访问摄像头
4. **重启设备**: 有时重启电脑可以解决设备占用问题

## 🎯 快速测试

运行本地服务器后，你应该看到：
1. 浏览器地址栏显示 `http://localhost:8000`
2. 地址栏左侧出现摄像头图标
3. 浏览器提示允许摄像头访问
4. 网页成功显示摄像头画面和手部追踪

如果一切正常，你应该能看到手部识别的可视化效果！🎉 

## 🎮 手势控制说明

成功启动后，你可以使用以下手势进行控制：

### 👈 左手控制（琶音）
- **上下移动**：控制音高
- **拇指食指距离**：控制音量（捏合音量小，张开音量大）
- **握拳**：切换合成器音色

### 👉 右手控制（鼓机）
- **手指伸展**：控制鼓点
  - 食指：底鼓 (Kick)
  - 中指：军鼓 (Snare)
  - 无名指：踩镲 (Hi-hat)
  - 小指：拍手声 (Clap)
- **4指紧贴**：食指、中指、无名指、小指伸直并紧贴，切换琶音风格
- **握拳**：切换鼓组预设

## 🤚 新功能：4指紧贴手势

最新版本中，我们改进了右手的琶音风格切换方式：
- **旧方式**：全手指张开或手掌翻转
- **新方式**：4个指头（食指、中指、无名指、小指）紧贴

这种方式更容易与握拳手势区分，提供更精确的控制体验。